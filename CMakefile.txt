# ============================================================
#  PRIMUS AI v2.0 â€” Makefile
#  Builds the enhanced Hindi AI for Raspberry Pi
# ============================================================

CXX      = g++
CXXFLAGS = -std=c++17 -O2 -Wall
LIBS     = -lsqlite3

TARGET   = hindi_ai
DB_FILE  = knowledge.db
SQL_FILE = seed_knowledge.sql

SRCS = main.cpp \
       hindi_ai.cpp \
       intelligence.cpp \
       enhancer.cpp \
       performer.cpp \
       tts.cpp

OBJS = $(SRCS:.cpp=.o)

# â”€â”€â”€ BUILD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
all: $(TARGET) db

$(TARGET): $(OBJS)
	$(CXX) $(CXXFLAGS) -o $@ $^ $(LIBS)
	@echo "âœ… Build successful: $(TARGET)"

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c -o $@ $<

# â”€â”€â”€ DATABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
db: $(DB_FILE)

$(DB_FILE): $(SQL_FILE)
	@echo "ðŸ—„ï¸  Seeding knowledge database..."
	sqlite3 $(DB_FILE) < $(SQL_FILE)
	@echo "âœ… Database ready: $(DB_FILE)"
	@sqlite3 $(DB_FILE) "SELECT COUNT(*) || ' entries loaded.' FROM knowledge;"

# â”€â”€â”€ CLEAN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
clean:
	rm -f $(OBJS) $(TARGET) $(DB_FILE)
	@echo "ðŸ§¹ Cleaned."

# â”€â”€â”€ COUNT DB â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
count:
	@sqlite3 $(DB_FILE) "SELECT category, COUNT(*) as cnt FROM knowledge GROUP BY category ORDER BY cnt DESC;"

# â”€â”€â”€ RUN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
run: all
	./$(TARGET)

voice: all
	python3 voice_listener.py

.PHONY: all db clean count run voice
